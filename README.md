# e_api_login_tel.py
電話認証対応　ログイン

ｅ支店APIのログイン サンプルコード（python）

APIバージョン： v4r7で動作確認

ご注意！！ ================================

	本番環境に接続した場合、実際に注文を出せます。

	市場で条件が一致して約定した場合、取り消せません。

	十分にご注意いただき、ご利用ください。

=========================================

機能

ログインして、仮想URL（１日券）を取得します。


口座情報を読み込み、ログインのみを行います。ログアウトはしません。

-----------------------------------------

使い方と動作の概略

１）定義ファイルを事前に設定してください。

 	「e_api_login_tel.py」と同じディレクトリに次のファイルを用意します。
  	e_api_account_info.txt
	ユーザーID、パスワード、第２パスワード、接続先URL、sJsonOfmtを設定します。

２）電話認証を行います。

３）３分以内に「e_api_account_info.txt」ファイルと同じディレクトリで実行します。

-----------------------------------------

出力ファイル：（実行ファイルと同じディレクトリ）

e_api_info_p_no.txt  
  現在のp_noを保存します。

e_api_login_response.txt  
  ログインで取得した応答を保存します。
	
=========================================

1）動作テストを実行した環境は、os: debian12、python: 3.11.2 です。

２）APIの利用には事前に立花証券ｅ支店に口座開設が必要です。定義ファイルe_api_account_info.txtを自身のユーザーID、パスワード等に変更してください。変更しない場合、abortします。

３）実行はコマンドプロンプト等からpython環境で起動してください。

４）実行内容は、以下になります。

・ログインして仮想URL（request, master, price, event）を取得します。

	上記に付随して、送信データや受信データを適宜print()文で出力します。

５）ログイン（電話認証付き）を実行したあとは、取得した仮想URL（１日券）を利用することで、夜間の閉局まで電話認証せずにAPIを利用できます。

	e_api_login_response.txtに保存された仮想URL（request）を利用して行います。

	セットするパラメーターはマニュアル「立花証券・ｅ支店・ＡＰＩ（ｖ〇）、REQUEST I/F、注文入力機能引数項目仕様」の５ページ目以降にサンプル事例が有りますので参照ください。

６）利用時間外に接続した場合、"p_errno":"9"（システム、サービス停止中。）が返されます。詳しくは「立花証券・ｅ支店・ＡＰＩ、EVENT I/F 利用方法、データ仕様」4ページをご参照ください。
なおデモ環境のご利用時間はデモ環境の案内ページでください。

７）本サンプルプログラムは、事務方の者が休日や空き時間に作成したため、色々足りておりません。ご容赦ください。

８）本プログラムは自由にご使用ください。

９）このソフトウェアを使用したことによって生じたすべての障害・損害・不具合等に関して、私と私の関係者および私の所属するいかなる団体・組織とも、一切の責任を負いません。各自の責任においてご使用ください。
 
